var __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, privateMap, value) {
  if (!privateMap.has(receiver)) {
    throw new TypeError("attempted to set private field on non-instance");
  }

  privateMap.set(receiver, value);
  return value;
};

var __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, privateMap) {
  if (!privateMap.has(receiver)) {
    throw new TypeError("attempted to get private field on non-instance");
  }

  return privateMap.get(receiver);
};

var _span;

import { SourceSpan } from './span';
export class SpanList {
  constructor(span = []) {
    _span.set(this, void 0);

    __classPrivateFieldSet(this, _span, span);
  }

  static range(span, fallback = SourceSpan.NON_EXISTENT) {
    return new SpanList(span.map(loc)).getRangeOffset(fallback);
  }

  add(offset) {
    __classPrivateFieldGet(this, _span).push(offset);
  }

  getRangeOffset(fallback) {
    if (__classPrivateFieldGet(this, _span).length === 0) {
      return fallback;
    } else {
      let first = __classPrivateFieldGet(this, _span)[0];

      let last = __classPrivateFieldGet(this, _span)[__classPrivateFieldGet(this, _span).length - 1];

      return first.extend(last);
    }
  }

}
_span = new WeakMap();
export function loc(span) {
  if (Array.isArray(span)) {
    let first = span[0];
    let last = span[span.length - 1];
    return loc(first).extend(loc(last));
  } else if (span instanceof SourceSpan) {
    return span;
  } else {
    return span.loc;
  }
}
export function hasSpan(span) {
  if (Array.isArray(span) && span.length === 0) {
    return false;
  }

  return true;
}
export function maybeLoc(location, fallback) {
  if (hasSpan(location)) {
    return loc(location);
  } else {
    return fallback;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL3N5bnRheC9saWIvc291cmNlL3NwYW4tbGlzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSUEsU0FBdUIsVUFBdkIsUUFBeUMsUUFBekM7QUFPQSxPQUFNLE1BQU8sUUFBUCxDQUFlO0FBU25CLEVBQUEsV0FBQSxDQUFZLElBQUEsR0FBcUIsRUFBakMsRUFBbUM7QUFGbkMsSUFBQSxLQUFBLENBQUEsR0FBQSxDQUFBLElBQUEsRUFBQSxLQUFBLENBQUE7O0FBR0UsSUFBQSxzQkFBQSxDQUFBLElBQUEsRUFBSSxLQUFKLEVBQWEsSUFBYixDQUFBO0FBQ0Q7O0FBUkQsU0FBTyxLQUFQLENBQWEsSUFBYixFQUFvQyxRQUFBLEdBQXVCLFVBQVUsQ0FBQyxZQUF0RSxFQUFrRjtBQUNoRixXQUFPLElBQUksUUFBSixDQUFhLElBQUksQ0FBQyxHQUFMLENBQVMsR0FBVCxDQUFiLEVBQTRCLGNBQTVCLENBQTJDLFFBQTNDLENBQVA7QUFDRDs7QUFRRCxFQUFBLEdBQUcsQ0FBQyxNQUFELEVBQW1CO0FBQ3BCLElBQUEsc0JBQUEsQ0FBQSxJQUFBLEVBQUEsS0FBQSxDQUFBLENBQVcsSUFBWCxDQUFnQixNQUFoQjtBQUNEOztBQUVELEVBQUEsY0FBYyxDQUFDLFFBQUQsRUFBcUI7QUFDakMsUUFBSSxzQkFBQSxDQUFBLElBQUEsRUFBQSxLQUFBLENBQUEsQ0FBVyxNQUFYLEtBQXNCLENBQTFCLEVBQTZCO0FBQzNCLGFBQU8sUUFBUDtBQUNELEtBRkQsTUFFTztBQUNMLFVBQUksS0FBSyxHQUFHLHNCQUFBLENBQUEsSUFBQSxFQUFBLEtBQUEsQ0FBQSxDQUFXLENBQVgsQ0FBWjs7QUFDQSxVQUFJLElBQUksR0FBRyxzQkFBQSxDQUFBLElBQUEsRUFBQSxLQUFBLENBQUEsQ0FBVyxzQkFBQSxDQUFBLElBQUEsRUFBQSxLQUFBLENBQUEsQ0FBVyxNQUFYLEdBQW9CLENBQS9CLENBQVg7O0FBRUEsYUFBTyxLQUFLLENBQUMsTUFBTixDQUFhLElBQWIsQ0FBUDtBQUNEO0FBQ0Y7O0FBMUJrQjs7QUErQnJCLE9BQU0sU0FBVSxHQUFWLENBQWMsSUFBZCxFQUFpQztBQUNyQyxNQUFJLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBZCxDQUFKLEVBQXlCO0FBQ3ZCLFFBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFELENBQWhCO0FBQ0EsUUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFMLEdBQWMsQ0FBZixDQUFmO0FBRUEsV0FBTyxHQUFHLENBQUMsS0FBRCxDQUFILENBQVcsTUFBWCxDQUFrQixHQUFHLENBQUMsSUFBRCxDQUFyQixDQUFQO0FBQ0QsR0FMRCxNQUtPLElBQUksSUFBSSxZQUFZLFVBQXBCLEVBQWdDO0FBQ3JDLFdBQU8sSUFBUDtBQUNELEdBRk0sTUFFQTtBQUNMLFdBQU8sSUFBSSxDQUFDLEdBQVo7QUFDRDtBQUNGO0FBSUQsT0FBTSxTQUFVLE9BQVYsQ0FBa0IsSUFBbEIsRUFBMEM7QUFDOUMsTUFBSSxLQUFLLENBQUMsT0FBTixDQUFjLElBQWQsS0FBdUIsSUFBSSxDQUFDLE1BQUwsS0FBZ0IsQ0FBM0MsRUFBOEM7QUFDNUMsV0FBTyxLQUFQO0FBQ0Q7O0FBRUQsU0FBTyxJQUFQO0FBQ0Q7QUFFRCxPQUFNLFNBQVUsUUFBVixDQUFtQixRQUFuQixFQUFpRCxRQUFqRCxFQUFxRTtBQUN6RSxNQUFJLE9BQU8sQ0FBQyxRQUFELENBQVgsRUFBdUI7QUFDckIsV0FBTyxHQUFHLENBQUMsUUFBRCxDQUFWO0FBQ0QsR0FGRCxNQUVPO0FBQ0wsV0FBTyxRQUFQO0FBQ0Q7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXNcbmltcG9ydCB0eXBlIHsgUHJlc2VudEFycmF5IH0gZnJvbSAnQGdsaW1tZXIvaW50ZXJmYWNlcyc7XG5cbmltcG9ydCB7IExvY2F0ZWRXaXRoT3B0aW9uYWxTcGFuLCBMb2NhdGVkV2l0aFNwYW4gfSBmcm9tICcuL2xvY2F0aW9uJztcbmltcG9ydCB7IFNvdXJjZU9mZnNldCwgU291cmNlU3BhbiB9IGZyb20gJy4vc3Bhbic7XG5cbmV4cG9ydCB0eXBlIEhhc1NwYW4gPSBTb3VyY2VTcGFuIHwgTG9jYXRlZFdpdGhTcGFuIHwgUHJlc2VudEFycmF5PExvY2F0ZWRXaXRoU3Bhbj47XG5leHBvcnQgdHlwZSBNYXliZUhhc1NwYW4gPSBTb3VyY2VTcGFuIHwgTG9jYXRlZFdpdGhPcHRpb25hbFNwYW4gfCBMb2NhdGVkV2l0aE9wdGlvbmFsU3BhbltdIHwgbnVsbDtcblxuZXhwb3J0IHR5cGUgVG9Tb3VyY2VPZmZzZXQgPSBudW1iZXIgfCBTb3VyY2VPZmZzZXQ7XG5cbmV4cG9ydCBjbGFzcyBTcGFuTGlzdCB7XG4gIHN0YXRpYyByYW5nZShzcGFuOiBQcmVzZW50QXJyYXk8SGFzU291cmNlU3Bhbj4pOiBTb3VyY2VTcGFuO1xuICBzdGF0aWMgcmFuZ2Uoc3BhbjogSGFzU291cmNlU3BhbltdLCBmYWxsYmFjazogU291cmNlU3Bhbik6IFNvdXJjZVNwYW47XG4gIHN0YXRpYyByYW5nZShzcGFuOiBIYXNTb3VyY2VTcGFuW10sIGZhbGxiYWNrOiBTb3VyY2VTcGFuID0gU291cmNlU3Bhbi5OT05fRVhJU1RFTlQpOiBTb3VyY2VTcGFuIHtcbiAgICByZXR1cm4gbmV3IFNwYW5MaXN0KHNwYW4ubWFwKGxvYykpLmdldFJhbmdlT2Zmc2V0KGZhbGxiYWNrKTtcbiAgfVxuXG4gICNzcGFuOiBTb3VyY2VTcGFuW107XG5cbiAgY29uc3RydWN0b3Ioc3BhbjogU291cmNlU3BhbltdID0gW10pIHtcbiAgICB0aGlzLiNzcGFuID0gc3BhbjtcbiAgfVxuXG4gIGFkZChvZmZzZXQ6IFNvdXJjZVNwYW4pOiB2b2lkIHtcbiAgICB0aGlzLiNzcGFuLnB1c2gob2Zmc2V0KTtcbiAgfVxuXG4gIGdldFJhbmdlT2Zmc2V0KGZhbGxiYWNrOiBTb3VyY2VTcGFuKTogU291cmNlU3BhbiB7XG4gICAgaWYgKHRoaXMuI3NwYW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBmaXJzdCA9IHRoaXMuI3NwYW5bMF07XG4gICAgICBsZXQgbGFzdCA9IHRoaXMuI3NwYW5bdGhpcy4jc3Bhbi5sZW5ndGggLSAxXTtcblxuICAgICAgcmV0dXJuIGZpcnN0LmV4dGVuZChsYXN0KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgSGFzU291cmNlU3BhbiA9IHsgbG9jOiBTb3VyY2VTcGFuIH0gfCBTb3VyY2VTcGFuIHwgW0hhc1NvdXJjZVNwYW4sIC4uLkhhc1NvdXJjZVNwYW5bXV07XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2Moc3BhbjogSGFzU291cmNlU3Bhbik6IFNvdXJjZVNwYW4ge1xuICBpZiAoQXJyYXkuaXNBcnJheShzcGFuKSkge1xuICAgIGxldCBmaXJzdCA9IHNwYW5bMF07XG4gICAgbGV0IGxhc3QgPSBzcGFuW3NwYW4ubGVuZ3RoIC0gMV07XG5cbiAgICByZXR1cm4gbG9jKGZpcnN0KS5leHRlbmQobG9jKGxhc3QpKTtcbiAgfSBlbHNlIGlmIChzcGFuIGluc3RhbmNlb2YgU291cmNlU3Bhbikge1xuICAgIHJldHVybiBzcGFuO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzcGFuLmxvYztcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBNYXliZUhhc1NvdXJjZVNwYW4gPSB7IGxvYzogU291cmNlU3BhbiB9IHwgU291cmNlU3BhbiB8IE1heWJlSGFzU291cmNlU3BhbltdO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFzU3BhbihzcGFuOiBNYXliZUhhc1NvdXJjZVNwYW4pOiBzcGFuIGlzIEhhc1NvdXJjZVNwYW4ge1xuICBpZiAoQXJyYXkuaXNBcnJheShzcGFuKSAmJiBzcGFuLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVMb2MobG9jYXRpb246IE1heWJlSGFzU291cmNlU3BhbiwgZmFsbGJhY2s6IFNvdXJjZVNwYW4pOiBTb3VyY2VTcGFuIHtcbiAgaWYgKGhhc1NwYW4obG9jYXRpb24pKSB7XG4gICAgcmV0dXJuIGxvYyhsb2NhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9