var __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, privateMap, value) {
  if (!privateMap.has(receiver)) {
    throw new TypeError("attempted to set private field on non-instance");
  }

  privateMap.set(receiver, value);
  return value;
};

var __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, privateMap) {
  if (!privateMap.has(receiver)) {
    throw new TypeError("attempted to get private field on non-instance");
  }

  return privateMap.get(receiver);
};

var _whens, _map, _whens_1;

import { assert, isPresent } from '@glimmer/util';
/**
 * This file implements the DSL used by span and offset in places where they need to exhaustively
 * consider all combinations of states (Handlebars offsets, character offsets and invisible/broken
 * offsets).
 *
 * It's probably overkill, but it makes the code that uses it clear. It could be refactored or
 * removed.
 */

export const MatchAny = 'MATCH_ANY';
export const IsInvisible = 'IS_INVISIBLE';

class WhenList {
  constructor(whens) {
    _whens.set(this, void 0);

    __classPrivateFieldSet(this, _whens, whens);
  }

  first(kind) {
    for (let when of __classPrivateFieldGet(this, _whens)) {
      let value = when.match(kind);

      if (isPresent(value)) {
        return value[0];
      }
    }

    return null;
  }

}

_whens = new WeakMap();

class When {
  constructor() {
    _map.set(this, new Map());
  }

  get(pattern, or) {
    let value = __classPrivateFieldGet(this, _map).get(pattern);

    if (value) {
      return value;
    }

    value = or();

    __classPrivateFieldGet(this, _map).set(pattern, value);

    return value;
  }

  add(pattern, out) {
    __classPrivateFieldGet(this, _map).set(pattern, out);
  }

  match(kind) {
    let pattern = patternFor(kind);
    let out = [];

    let exact = __classPrivateFieldGet(this, _map).get(pattern);

    let fallback = __classPrivateFieldGet(this, _map).get(MatchAny);

    if (exact) {
      out.push(exact);
    }

    if (fallback) {
      out.push(fallback);
    }

    return out;
  }

}

_map = new WeakMap();
export function match(callback) {
  return callback(new Matcher()).check();
}

class Matcher {
  constructor() {
    _whens_1.set(this, new When());
  }
  /**
   * You didn't exhaustively match all possibilities.
   */


  check() {
    return (left, right) => this.matchFor(left.kind, right.kind)(left, right);
  }

  matchFor(left, right) {
    let nesteds = __classPrivateFieldGet(this, _whens_1).match(left);

    (false && assert(isPresent(nesteds), `no match defined for (${left}, ${right}) and no AnyMatch defined either`));
    let callback = new WhenList(nesteds).first(right);
    (false && assert(callback !== null, `no match defined for (${left}, ${right}) and no AnyMatch defined either`));
    return callback;
  }

  when(left, right, // eslint-disable-next-line @typescript-eslint/no-explicit-any
  callback) {
    __classPrivateFieldGet(this, _whens_1).get(left, () => new When()).add(right, callback);

    return this;
  }

}

_whens_1 = new WeakMap();

function patternFor(kind) {
  switch (kind) {
    case "Broken"
    /* Broken */
    :
    case "InternalsSynthetic"
    /* InternalsSynthetic */
    :
    case "NonExistent"
    /* NonExistent */
    :
      return IsInvisible;

    default:
      return kind;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL3N5bnRheC9saWIvc291cmNlL2xvYy9tYXRjaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsU0FBUyxNQUFULEVBQWlCLFNBQWpCLFFBQWtDLGVBQWxDO0FBSUE7Ozs7Ozs7OztBQVNBLE9BQU8sTUFBTSxRQUFRLEdBQUcsV0FBakI7QUFXUCxPQUFPLE1BQU0sV0FBVyxHQUFHLGNBQXBCOztBQUtQLE1BQU0sUUFBTixDQUFjO0FBR1osRUFBQSxXQUFBLENBQVksS0FBWixFQUE4QjtBQUY5QixJQUFBLE1BQUEsQ0FBQSxHQUFBLENBQUEsSUFBQSxFQUFBLEtBQUEsQ0FBQTs7QUFHRSxJQUFBLHNCQUFBLENBQUEsSUFBQSxFQUFJLE1BQUosRUFBYyxLQUFkLENBQUE7QUFDRDs7QUFFRCxFQUFBLEtBQUssQ0FBQyxJQUFELEVBQWlCO0FBQ3BCLFNBQUssSUFBSSxJQUFULElBQWEsc0JBQUEsQ0FBQSxJQUFBLEVBQUEsTUFBQSxDQUFiLEVBQThCO0FBQzVCLFVBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBWCxDQUFaOztBQUNBLFVBQUksU0FBUyxDQUFDLEtBQUQsQ0FBYixFQUFzQjtBQUNwQixlQUFPLEtBQUssQ0FBQyxDQUFELENBQVo7QUFDRDtBQUNGOztBQUVELFdBQU8sSUFBUDtBQUNEOztBQWhCVzs7OztBQW1CZCxNQUFNLElBQU4sQ0FBVTtBQUFWLEVBQUEsV0FBQSxHQUFBO0FBQ0UsSUFBQSxJQUFBLENBQUEsR0FBQSxDQUFBLElBQUEsRUFBMEIsSUFBSSxHQUFKLEVBQTFCO0FBc0NEOztBQXBDQyxFQUFBLEdBQUcsQ0FBQyxPQUFELEVBQW1CLEVBQW5CLEVBQWdDO0FBQ2pDLFFBQUksS0FBSyxHQUFHLHNCQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsQ0FBQSxDQUFVLEdBQVYsQ0FBYyxPQUFkLENBQVo7O0FBRUEsUUFB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Y2VzQ29udGVudCI6WyJpbXBvcnQgeyBhc3NlcnQsIGlzUHJlc2VudCB9IGZyb20gJ0BnbGltbWVyL3V0aWwnO1xuXG5pbXBvcnQgeyBDaGFyUG9zaXRpb24sIEhic1Bvc2l0aW9uLCBJbnZpc2libGVQb3NpdGlvbiwgT2Zmc2V0S2luZCwgUG9zaXRpb25EYXRhIH0gZnJvbSAnLi9vZmZzZXQnO1xuXG4vKipcbiAqIFRoaXMgZmlsZSBpbXBsZW1lbnRzIHRoZSBEU0wgdXNlZCBieSBzcGFuIGFuZCBvZmZzZXQgaW4gcGxhY2VzIHdoZXJlIHRoZXkgbmVlZCB0byBleGhhdXN0aXZlbHlcbiAqIGNvbnNpZGVyIGFsbCBjb21iaW5hdGlvbnMgb2Ygc3RhdGVzIChIYW5kbGViYXJzIG9mZnNldHMsIGNoYXJhY3RlciBvZmZzZXRzIGFuZCBpbnZpc2libGUvYnJva2VuXG4gKiBvZmZzZXRzKS5cbiAqXG4gKiBJdCdzIHByb2JhYmx5IG92ZXJraWxsLCBidXQgaXQgbWFrZXMgdGhlIGNvZGUgdGhhdCB1c2VzIGl0IGNsZWFyLiBJdCBjb3VsZCBiZSByZWZhY3RvcmVkIG9yXG4gKiByZW1vdmVkLlxuICovXG5cbmV4cG9ydCBjb25zdCBNYXRjaEFueSA9ICdNQVRDSF9BTlknO1xuZXhwb3J0IHR5cGUgTWF0Y2hBbnkgPSAnTUFUQ0hfQU5ZJztcblxudHlwZSBNYXRjaGVzID1cbiAgfCAnQ2hhcixIYnMnXG4gIHwgJ0hicyxDaGFyJ1xuICB8ICdIYnMsSGJzJ1xuICB8ICdDaGFyLENoYXInXG4gIHwgJ0ludmlzaWJsZSxBbnknXG4gIHwgJ0FueSxJbnZpc2libGUnO1xuXG5leHBvcnQgY29uc3QgSXNJbnZpc2libGUgPSAnSVNfSU5WSVNJQkxFJztcbmV4cG9ydCB0eXBlIElzSW52aXNpYmxlID0gJ0lTX0lOVklTSUJMRSc7XG5cbnR5cGUgUGF0dGVybiA9IE9mZnNldEtpbmQgfCBJc0ludmlzaWJsZSB8IE1hdGNoQW55O1xuXG5jbGFzcyBXaGVuTGlzdDxPdXQ+IHtcbiAgI3doZW5zOiBXaGVuPE91dD5bXTtcblxuICBjb25zdHJ1Y3Rvcih3aGVuczogV2hlbjxPdXQ+W10pIHtcbiAgICB0aGlzLiN3aGVucyA9IHdoZW5zO1xuICB9XG5cbiAgZmlyc3Qoa2luZDogT2Zmc2V0S2luZCk6IE91dCB8IG51bGwge1xuICAgIGZvciAobGV0IHdoZW4gb2YgdGhpcy4jd2hlbnMpIHtcbiAgICAgIGxldCB2YWx1ZSA9IHdoZW4ubWF0Y2goa2luZCk7XG4gICAgICBpZiAoaXNQcmVzZW50KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWVbMF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuY2xhc3MgV2hlbjxPdXQ+IHtcbiAgI21hcDogTWFwPFBhdHRlcm4sIE91dD4gPSBuZXcgTWFwKCk7XG5cbiAgZ2V0KHBhdHRlcm46IFBhdHRlcm4sIG9yOiAoKSA9PiBPdXQpOiBPdXQge1xuICAgIGxldCB2YWx1ZSA9IHRoaXMuI21hcC5nZXQocGF0dGVybik7XG5cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICB2YWx1ZSA9IG9yKCk7XG5cbiAgICB0aGlzLiNtYXAuc2V0KHBhdHRlcm4sIHZhbHVlKTtcblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGFkZChwYXR0ZXJuOiBQYXR0ZXJuLCBvdXQ6IE91dCk6IHZvaWQge1xuICAgIHRoaXMuI21hcC5zZXQocGF0dGVybiwgb3V0KTtcbiAgfVxuXG4gIG1hdGNoKGtpbmQ6IE9mZnNldEtpbmQpOiBPdXRbXSB7XG4gICAgbGV0IHBhdHRlcm4gPSBwYXR0ZXJuRm9yKGtpbmQpO1xuXG4gICAgbGV0IG91dDogT3V0W10gPSBbXTtcblxuICAgIGxldCBleGFjdCA9IHRoaXMuI21hcC5nZXQocGF0dGVybik7XG4gICAgbGV0IGZhbGxiYWNrID0gdGhpcy4jbWFwLmdldChNYXRjaEFueSk7XG5cbiAgICBpZiAoZXhhY3QpIHtcbiAgICAgIG91dC5wdXNoKGV4YWN0KTtcbiAgICB9XG5cbiAgICBpZiAoZmFsbGJhY2spIHtcbiAgICAgIG91dC5wdXNoKGZhbGxiYWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0O1xuICB9XG59XG5cbnR5cGUgRXhoYXVzdGl2ZUNoZWNrPE91dCwgSW4gZXh0ZW5kcyBNYXRjaGVzLCBSZW1vdmVkIGV4dGVuZHMgTWF0Y2hlcz4gPSBFeGNsdWRlPFxuICBJbixcbiAgUmVtb3ZlZFxuPiBleHRlbmRzIG5ldmVyXG4gID8gRXhoYXVzdGl2ZU1hdGNoZXI8T3V0PlxuICA6IE1hdGNoZXI8T3V0LCBFeGNsdWRlPEluLCBSZW1vdmVkPj47XG5cbmV4cG9ydCB0eXBlIE1hdGNoRm48T3V0PiA9IChsZWZ0OiBQb3NpdGlvbkRhdGEsIHJpZ2h0OiBQb3NpdGlvbkRhdGEpID0+IE91dDtcblxuaW50ZXJmYWNlIEV4aGF1c3RpdmVNYXRjaGVyPE91dD4ge1xuICBjaGVjaygpOiBNYXRjaEZuPE91dD47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaDxPdXQ+KGNhbGxiYWNrOiAobTogTWF0Y2hlcjxPdXQ+KSA9PiBFeGhhdXN0aXZlTWF0Y2hlcjxPdXQ+KTogTWF0Y2hGbjxPdXQ+IHtcbiAgcmV0dXJuIGNhbGxiYWNrKG5ldyBNYXRjaGVyKCkpLmNoZWNrKCk7XG59XG5cbmNsYXNzIE1hdGNoZXI8T3V0LCBNIGV4dGVuZHMgTWF0Y2hlcyA9IE1hdGNoZXM+IHtcbiAgI3doZW5zOiBXaGVuPFdoZW48KGxlZnQ6IFBvc2l0aW9uRGF0YSwgcmlnaHQ6IFBvc2l0aW9uRGF0YSkgPT4gT3V0Pj4gPSBuZXcgV2hlbigpO1xuXG4gIC8qKlxuICAgKiBZb3UgZGlkbid0IGV4aGF1c3RpdmVseSBtYXRjaCBhbGwgcG9zc2liaWxpdGllcy5cbiAgICovXG4gIHByb3RlY3RlZCBjaGVjaygpOiBNYXRjaEZuPE91dD4ge1xuICAgIHJldHVybiAobGVmdCwgcmlnaHQpID0+IHRoaXMubWF0Y2hGb3IobGVmdC5raW5kLCByaWdodC5raW5kKShsZWZ0LCByaWdodCk7XG4gIH1cblxuICBwcml2YXRlIG1hdGNoRm9yKFxuICAgIGxlZnQ6IE9mZnNldEtpbmQsXG4gICAgcmlnaHQ6IE9mZnNldEtpbmRcbiAgKTogKGxlZnQ6IFBvc2l0aW9uRGF0YSwgcmlnaHQ6IFBvc2l0aW9uRGF0YSkgPT4gT3V0IHtcbiAgICBsZXQgbmVzdGVkcyA9IHRoaXMuI3doZW5zLm1hdGNoKGxlZnQpO1xuXG4gICAgYXNzZXJ0KFxuICAgICAgaXNQcmVzZW50KG5lc3RlZHMpLFxuICAgICAgYG5vIG1hdGNoIGRlZmluZWQgZm9yICgke2xlZnR9LCAke3JpZ2h0fSkgYW5kIG5vIEFueU1hdGNoIGRlZmluZWQgZWl0aGVyYFxuICAgICk7XG5cbiAgICBsZXQgY2FsbGJhY2sgPSBuZXcgV2hlbkxpc3QobmVzdGVkcykuZmlyc3QocmlnaHQpO1xuXG4gICAgYXNzZXJ0KFxuICAgICAgY2FsbGJhY2sgIT09IG51bGwsXG4gICAgICBgbm8gbWF0Y2ggZGVmaW5lZCBmb3IgKCR7bGVmdH0sICR7cmlnaHR9KSBhbmQgbm8gQW55TWF0Y2ggZGVmaW5lZCBlaXRoZXJgXG4gICAgKTtcblxuICAgIHJldHVybiBjYWxsYmFjaztcbiAgfVxuXG4gIC8vIFRoaXMgYmlnIGJsb2NrIGlzIHRoZSBidWxrIG9mIHRoZSBoZWF2eSBsaWZ0aW5nIGluIHRoaXMgZmlsZS4gSXQgZmFjaWxpdGF0ZXMgZXhoYXVzdGl2ZW5lc3NcbiAgLy8gY2hlY2tpbmcgc28gdGhhdCBtYXRjaGVycyBjYW4gZW5zdXJlIHRoZXkndmUgYWN0dWFsbHkgY292ZXJlZCBhbGwgdGhlIGNhc2VzIChhbmQgVHlwZVNjcmlwdFxuICAvLyB3aWxsIHRyZWF0IGl0IGFzIGFuIGV4aGF1c3RpdmUgbWF0Y2gpLlxuICB3aGVuKFxuICAgIGxlZnQ6IE9mZnNldEtpbmQuQ2hhclBvc2l0aW9uLFxuICAgIHJpZ2h0OiBPZmZzZXRLaW5kLkhic1Bvc2l0aW9uLFxuICAgIGNhbGxiYWNrOiAobGVmdDogQ2hhclBvc2l0aW9uLCByaWdodDogSGJzUG9zaXRpb24pID0+IE91dFxuICApOiBFeGhhdXN0aXZlQ2hlY2s8T3V0LCBNLCAnQ2hhcixIYnMnPjtcbiAgd2hlbihcbiAgICBsZWZ0OiBPZmZzZXRLaW5kLkhic1Bvc2l0aW9uLFxuICAgIHJpZ2h0OiBPZmZzZXRLaW5kLkNoYXJQb3NpdGlvbixcbiAgICBjYWxsYmFjazogKGxlZnQ6IEhic1Bvc2l0aW9uLCByaWdodDogQ2hhclBvc2l0aW9uKSA9PiBPdXRcbiAgKTogRXhoYXVzdGl2ZUNoZWNrPE91dCwgTSwgJ0hicyxDaGFyJz47XG4gIHdoZW4oXG4gICAgbGVmdDogT2Zmc2V0S2luZC5IYnNQb3NpdGlvbixcbiAgICByaWdodDogT2Zmc2V0S2luZC5IYnNQb3NpdGlvbixcbiAgICBjYWxsYmFjazogKGxlZnQ6IEhic1Bvc2l0aW9uLCByaWdodDogSGJzUG9zaXRpb24pID0+IE91dFxuICApOiBFeGhhdXN0aXZlQ2hlY2s8T3V0LCBNLCAnSGJzLEhicyc+O1xuICB3aGVuKFxuICAgIGxlZnQ6IE9mZnNldEtpbmQuQ2hhclBvc2l0aW9uLFxuICAgIHJpZ2h0OiBPZmZzZXRLaW5kLkNoYXJQb3NpdGlvbixcbiAgICBjYWxsYmFjazogKGxlZnQ6IENoYXJQb3NpdGlvbiwgcmlnaHQ6IENoYXJQb3NpdGlvbikgPT4gT3V0XG4gICk6IEV4aGF1c3RpdmVDaGVjazxPdXQsIE0sICdDaGFyLENoYXInPjtcbiAgd2hlbihcbiAgICBsZWZ0OiBJc0ludmlzaWJsZSxcbiAgICByaWdodDogTWF0Y2hBbnksXG4gICAgY2FsbGJhY2s6IChsZWZ0OiBJbnZpc2libGVQb3NpdGlvbiwgcmlnaHQ6IFBvc2l0aW9uRGF0YSkgPT4gT3V0XG4gICk6IE1hdGNoZXI8T3V0LCBFeGNsdWRlPE0sICdJbnZpc2libGUsQW55Jz4+O1xuICB3aGVuKFxuICAgIGxlZnQ6IE1hdGNoQW55LFxuICAgIHJpZ2h0OiBJc0ludmlzaWJsZSxcbiAgICBjYWxsYmFjazogKGxlZnQ6IFBvc2l0aW9uRGF0YSwgcmlnaHQ6IEludmlzaWJsZVBvc2l0aW9uKSA9PiBPdXRcbiAgKTogRXhoYXVzdGl2ZUNoZWNrPE91dCwgTSwgJ0FueSxJbnZpc2libGUnPjtcbiAgd2hlbihcbiAgICBsZWZ0OiBNYXRjaEFueSxcbiAgICByaWdodDogTWF0Y2hBbnksXG4gICAgY2FsbGJhY2s6IChsZWZ0OiBQb3NpdGlvbkRhdGEsIHJpZ2h0OiBQb3NpdGlvbkRhdGEpID0+IE91dFxuICApOiBFeGhhdXN0aXZlTWF0Y2hlcjxPdXQ+O1xuICB3aGVuKFxuICAgIGxlZnQ6IFBhdHRlcm4sXG4gICAgcmlnaHQ6IFBhdHRlcm4sXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsYmFjazogKGxlZnQ6IGFueSwgcmlnaHQ6IGFueSkgPT4gT3V0XG4gICk6IE1hdGNoZXI8T3V0LCBNYXRjaGVzPiB8IEV4aGF1c3RpdmVNYXRjaGVyPE91dD4ge1xuICAgIHRoaXMuI3doZW5zLmdldChsZWZ0LCAoKSA9PiBuZXcgV2hlbigpKS5hZGQocmlnaHQsIGNhbGxiYWNrKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhdHRlcm5Gb3Ioa2luZDogT2Zmc2V0S2luZCk6IFBhdHRlcm4ge1xuICBzd2l0Y2ggKGtpbmQpIHtcbiAgICBjYXNlIE9mZnNldEtpbmQuQnJva2VuOlxuICAgIGNhc2UgT2Zmc2V0S2luZC5JbnRlcm5hbHNTeW50aGV0aWM6XG4gICAgY2FzZSBPZmZzZXRLaW5kLk5vbkV4aXN0ZW50OlxuICAgICAgcmV0dXJuIElzSW52aXNpYmxlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4ga2luZDtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==